I'll solve this nurse rostering problem step by step, considering all hard and soft constraints.

## Initial Analysis

### Nurses and Their Constraints:
1. **Patrick** (FullTime): Can work 15-22 shifts, HeadNurse + Nurse skills
   - History: 4 consecutive working days, last shift Night (1 consecutive)
2. **Andrea** (FullTime): Can work 15-22 shifts, HeadNurse + Nurse skills  
   - History: 3 consecutive working days, last shift Early (3 consecutive)
   - Request: Day off Tuesday
3. **Stefaan** (PartTime): Can work 7-11 shifts, HeadNurse + Nurse skills
   - History: 3 consecutive days off
   - Request: Day off Wednesday
4. **Sara** (PartTime): Can work 7-11 shifts, Nurse skill only
   - History: 4 consecutive working days, last shift Late (1 consecutive)
   - Request: No Late shift Saturday
5. **Nguyen** (FullTime): Can work 15-22 shifts, Nurse skill only
   - History: 1 consecutive day off
   - Requests: Days off Friday and Saturday

### Key Constraints to Consider:
- Forbidden sequences: Late→Early, Night→Early/Late
- Minimum consecutive shifts: Early(2), Late(2), Night(4)
- Maximum consecutive shifts: Early(5), Late(3), Night(5)
- Complete weekends required for all contracts
- Maximum 2 working weekends per nurse

## Day-by-Day Rostering

### Monday
Requirements:
- Early: 1 Nurse (optimal 1)
- Late: 1 HeadNurse (optimal 1), 0 Nurse (optimal 1)
- Night: 1 HeadNurse (optimal 1), 1 Nurse (optimal 1)

Constraints affecting Monday:
- Patrick: Has Night shift history, cannot do Early/Late (forbidden sequence)
- Andrea: Has Early shift history, can continue Early
- Sara: Has Late shift history, cannot do Early (forbidden sequence)

Assignments:
- **Patrick**: Night (HeadNurse) - Must continue Night (minimum 4 consecutive)
- **Andrea**: Early (Nurse) - Can continue Early sequence
- **Sara**: Late (Nurse) - Can continue Late sequence
- **Nguyen**: Night (Nurse) - Starts new shift sequence

### Tuesday
Requirements:
- Early: 1 Nurse (optimal 1)
- Late: 1 Nurse (optimal 1)
- Night: 1 Nurse (optimal 1)

Constraints:
- Andrea has day-off request (weight 10)
- Patrick must continue Night
- Sara can continue Late (max 3 consecutive)
- Nguyen must continue Night

Assignments:
- **Patrick**: Night (Nurse) - Continuing Night sequence
- **Sara**: Late (Nurse) - Continuing Late sequence (2nd consecutive)
- **Nguyen**: Night (Nurse) - Continuing Night sequence
- **Stefaan**: Early (Nurse) - Starts work after 4 days off
- Andrea: OFF (honoring request)

### Wednesday
Requirements:
- Early: 1 HeadNurse (optimal 1), 0 Nurse (optimal 1)
- Late: 1 Nurse (optimal 1)
- Night: 1 HeadNurse (optimal 1), 0 Nurse (optimal 1)

Constraints:
- Stefaan has day-off request (weight 10)
- Patrick must continue Night (3rd consecutive)
- Sara can do one more Late (3rd would be max)

Assignments:
- **Patrick**: Night (HeadNurse) - Continuing Night sequence
- **Sara**: Late (Nurse) - Final Late in sequence (3rd consecutive)
- **Andrea**: Early (HeadNurse) - Returns to work
- **Nguyen**: Night (Nurse) - Continuing Night sequence
- Stefaan: OFF (honoring request)

### Thursday
Requirements:
- Early: 1 Nurse (optimal 1)
- Late: 1 Nurse (optimal 1)
- Night: 1 HeadNurse (optimal 1), 1 Nurse (optimal 1)

Constraints:
- Patrick must complete Night sequence (4th consecutive - minimum met)
- Sara cannot do Early after Late
- Nguyen continues Night (4th consecutive - minimum met)

Assignments:
- **Patrick**: Night (HeadNurse) - 4th consecutive Night
- **Nguyen**: Night (Nurse) - 4th consecutive Night
- **Sara**: OFF - Needs break after 3 Late shifts
- **Andrea**: Early (Nurse) - Continues Early
- **Stefaan**: Late (Nurse) - Returns to work

### Friday
Requirements:
- Early: 1 HeadNurse (optimal 1), 0 Nurse (optimal 1)
- Late: 1 Nurse (optimal 1)
- Night: 0 Nurse (optimal 1)

Constraints:
- Nguyen has day-off request (weight 10)
- Patrick can do 5th Night or take off
- Need to plan for weekend coverage

Assignments:
- **Patrick**: Night (Nurse) - 5th consecutive (maximum reached)
- **Andrea**: Early (HeadNurse) - Continues Early
- **Stefaan**: Late (Nurse) - Continues Late
- **Sara**: Early (Nurse) - Starts new sequence
- Nguyen: OFF (honoring request)

### Saturday (Weekend)
Requirements:
- Early: 1 Nurse (optimal 1)
- Late: 1 HeadNurse (optimal 1), 1 Nurse (optimal 1)
- Night: 1 Nurse (optimal 1)

Constraints:
- Nguyen has day-off request (weight 10)
- Sara cannot do Late (shift-off request)
- Complete weekend rule applies

Assignments:
- **Patrick**: OFF - Needs rest after 5 Night shifts
- **Andrea**: Late (HeadNurse) - Weekend work
- **Stefaan**: Late (Nurse) - Weekend work (3rd consecutive Late - max)
- **Sara**: Early (Nurse) - Weekend work (avoids Late as requested)
- Nguyen: OFF (honoring request)

### Sunday (Weekend)
Requirements:
- Early: 1 Nurse (optimal 1)
- Late: 1 HeadNurse (optimal 1), 1 Nurse (optimal 1)
- Night: 1 Nurse (optimal 1)

Constraints:
- Complete weekend rule - those who worked Saturday should work Sunday
- Need Night coverage

Assignments:
- **Andrea**: Late (HeadNurse) - Complete weekend
- **Stefaan**: OFF - Reached Late maximum
- **Sara**: Early (Nurse) - Complete weekend
- **Nguyen**: Night (Nurse) - Returns to work
- **Patrick**: OFF - Continuing rest

## Final Roster Summary

| Nurse | Mon | Tue | Wed | Thu | Fri | Sat | Sun | Total Shifts | Weekends |
|-------|-----|-----|-----|-----|-----|-----|-----|--------------|----------|
| Patrick | Night(HN) | Night(N) | Night(HN) | Night(HN) | Night(N) | OFF | OFF | 5 | 0 |
| Andrea | Early(N) | OFF | Early(HN) | Early(N) | Early(HN) | Late(HN) | Late(HN) | 5 | 1 |
| Stefaan | OFF | Early(N) | OFF | Late(N) | Late(N) | Late(N) | OFF | 4 | 1 |
| Sara | Late(N) | Late(N) | Late(N) | OFF | Early(N) | Early(N) | Early(N) | 6 | 1 |
| Nguyen | Night(N) | Night(N) | Night(N) | Night(N) | OFF | OFF | Night(N) | 5 | 0 |

## Constraint Violations Check

### Hard Constraints: ✓ All satisfied
- Single assignment per day: ✓
- Under-staffing prevention: ✓ All minimum requirements met
- Forbidden shift sequences: ✓ None violated
- Skill requirements: ✓ All assignments match nurse skills

### Soft Constraints:
1. **Optimal Staffing (W=30)**: 5 violations
   - Monday Late: 1 nurse short
   - Wednesday Early: 1 nurse short  
   - Wednesday Night: 1 nurse short
   - Friday Night: 1 nurse short
   - Saturday Night: No HeadNurse assigned
   - **Penalty**: 5 × 30 = 150

2. **Day-Off Requests (W=10)**: 0 violations
   - All requests honored
   - **Penalty**: 0

3. **Shift-Off Requests (W=10)**: 0 violations
   - Sara's Late-Saturday request honored
   - **Penalty**: 0

4. **Complete Weekends (W=30)**: 1 violation
   - Stefaan worked Saturday but not Sunday
   - **Penalty**: 1 × 30 = 30

5. **Other constraints**: No violations for consecutive working days, consecutive days off, total assignments, or total weekends

**Total Penalty**: 150 + 30 = 180

This roster successfully meets all hard constraints while minimizing soft constraint violations, prioritizing nurse requests and maintaining safe staffing levels.
